<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
   <!-- SEO & Page Info -->
   <title>ProBookingQR | Stop Losing Clients to Missed Calls</title>
   <meta name="description" content="ProBookingQR helps solo professionals capture more clients with 24/7 automated booking via QR codes. No missed calls, no complex software.">
   <!-- Favicon -->
   <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚡️</text></svg>">
   <!-- Social Media Sharing (Open Graph & Twitter) -->
   <meta property="og:title" content="ProBookingQR | Stop Losing Clients to Missed Calls">
   <meta property="og:description" content="Automated QR-to-Book system for solo service pros. Book more clients without missing calls.">
   <meta property="og:image" content="https://placehold.co/1200x630/1e293b/93c5fd?text=ProBookingQR">
   <meta property="og:url" content="https://your-domain.com/">
   <meta name="twitter:card" content="summary_large_image">
   <!-- Google Fonts: Inter -->
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
   <!-- Tailwind CSS -->
   <script src="https://cdn.tailwindcss.com"></script>
   <!-- React -->
   <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
   <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
   <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
   <!-- Firebase -->
   <script type="module">
      const defaultConfig = {
         apiKey: "YOUR_API_KEY",
         authDomain: "YOUR_AUTH_DOMAIN",
         projectId: "YOUR_PROJECT_ID",
         storageBucket: "YOUR_STORAGE_BUCKET",
         messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
         appId: "YOUR_APP_ID"
      };
      window.__firebase_config = typeof __firebase_config !== 'undefined' ? __firebase_config : JSON.stringify(defaultConfig);
      window.__app_id = typeof __app_id !== 'undefined' ? __app_id : 'standalone-chatbot-app';
      window.__initial_auth_token = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : undefined;

      import {
         initializeApp
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import {
         getFirestore,
         doc,
         getDoc,
         setDoc
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
      import {
         getAuth,
         signInAnonymously,
         signInWithCustomToken,
         onAuthStateChanged
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

      window.firebaseServices = {
         initializeApp,
         getFirestore,
         doc,
         getDoc,
         setDoc,
         getAuth,
         signInAnonymously,
         signInWithCustomToken,
         onAuthStateChanged
      };
   </script>
   <style>
      /* Custom styles to supplement Tailwind */
      body {
         font-family: 'Inter', sans-serif;
         -webkit-font-smoothing: antialiased;
         -moz-osx-font-smoothing: grayscale;
      }

      .text-glow {
         text-shadow: 0 0 15px rgba(167, 139, 250, 0.4), 0 0 25px rgba(167, 139, 250, 0.2);
      }

      .bg-grid-pattern {
         background-image: linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
         background-size: 20px 20px;
      }

      /* Mobile-responsive chatbot modal */
      #chatbot-modal {
         display: none;
         position: fixed;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         z-index: 9999;
         background-color: rgba(0, 0, 0, 0.8);
         backdrop-filter: blur(4px);
         -webkit-backdrop-filter: blur(4px);
      }

      .chatbot-container {
         position: absolute;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         display: flex;
         align-items: center;
         justify-content: center;
         padding: 16px;
      }

      .chatbot-content {
         width: 100%;
         height: 100%;
         max-width: 500px;
         max-height: 90vh;
         background: white;
         border-radius: 16px;
         box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
         overflow: hidden;
         display: flex;
         flex-direction: column;
         position: relative;
      }

      @media (max-width: 768px) {
         .chatbot-container {
            padding: 0;
         }

         .chatbot-content {
            height: 100%;
            max-height: 100%;
            border-radius: 0;
         }
      }

      .chatbot-close-btn {
         position: absolute;
         top: 12px;
         right: 12px;
         z-index: 10001;
         background: rgba(0, 0, 0, 0.5);
         color: white;
         border: none;
         border-radius: 50%;
         width: 36px;
         height: 36px;
         display: flex;
         align-items: center;
         justify-content: center;
         font-size: 20px;
         font-weight: 300;
         cursor: pointer;
         transition: all 0.2s;
      }

      .chatbot-close-btn:hover {
         background: rgba(0, 0, 0, 0.7);
         transform: scale(1.1);
      }

      .typing-indicator span {
         height: 8px;
         width: 8px;
         background-color: #9ca3af;
         border-radius: 50%;
         display: inline-block;
         margin: 0 1px;
         animation: bounce 0.6s infinite alternate;
      }

      .typing-indicator span:nth-child(2) {
         animation-delay: 0.2s;
      }

      .typing-indicator span:nth-child(3) {
         animation-delay: 0.4s;
      }

      @keyframes bounce {
         to {
            opacity: 0.3;
            transform: translate3d(0, -4px, 0);
         }
      }

      .progress-bar-container {
         width: 100%;
         background-color: #e5e7eb;
         border-radius: 9999px;
         overflow: hidden;
      }

      .progress-bar {
         height: 12px;
         background-color: #6366f1;
         border-radius: 9999px;
         transition: width 0.5s ease-in-out;
      }

      details>summary {
         list-style: none;
      }

      details>summary::-webkit-details-marker {
         display: none;
      }

      details[open] summary .plus-icon {
         transform: rotate(45deg);
      }

      /* ROI Calculator Styles */
      .range-slider {
         -webkit-appearance: none;
         appearance: none;
         width: 100%;
         height: 8px;
         background: #4a5568;
         /* gray-700 */
         border-radius: 9999px;
         outline: none;
         opacity: 0.7;
         transition: opacity .2s;
      }

      .range-slider:hover {
         opacity: 1;
      }

      .range-slider::-webkit-slider-thumb {
         -webkit-appearance: none;
         appearance: none;
         width: 24px;
         height: 24px;
         background: #8b5cf6;
         /* violet-500 */
         cursor: pointer;
         border-radius: 50%;
      }

      .range-slider::-moz-range-thumb {
         width: 24px;
         height: 24px;
         background: #8b5cf6;
         /* violet-500 */
         cursor: pointer;
         border-radius: 50%;
      }
   </style>
</head>

<body class="bg-slate-900 text-slate-300">
   <!-- Header -->
   <header class="bg-slate-900/80 backdrop-blur-sm sticky top-0 z-40">
      <div class="container mx-auto px-6 py-4 flex justify-between items-center">
         <a href="#" class="text-2xl font-bold text-white">
            ProBooking<span class="text-indigo-400">QR</span>
         </a>
      </div>
   </header>
   <!-- Main Content -->
   <main class="relative overflow-hidden">
      <div class="absolute inset-0 bg-grid-pattern opacity-60"></div>
      <div class="absolute inset-0 bg-gradient-to-b from-slate-900 via-slate-900/80 to-slate-900"></div>
      <!-- Hero Section -->
      <section class="relative container mx-auto px-6 py-20 md:py-32 text-center">
         <div class="max-w-4xl mx-auto">
            <div class="inline-block bg-indigo-500/10 text-indigo-400 text-sm font-semibold px-4 py-1 rounded-full mb-4">
               24/7 Automated Booking
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-6 leading-tight text-glow">
               Stop Losing Clients to Missed Calls.
            </h1>
            <p class="text-lg md:text-xl text-slate-400 max-w-2xl mx-auto mb-10">
               Turn your business into a booking machine that works around the clock, even when you're busy with other clients.
            </p>
            <button onclick="openChatbot()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold text-lg px-8 py-4 rounded-xl shadow-lg shadow-indigo-500/20 transition-all duration-300 transform hover:scale-105">
               Get Your QR-to-Book System
            </button>
            <div class="mt-16 bg-slate-800/50 backdrop-blur-md p-6 rounded-2xl max-w-2xl mx-auto border border-slate-700">
               <h3 class="font-bold text-white text-lg">"I missed 3 calls while doing hair today..."</h3>
               <p class="text-slate-400 mt-2">Sound familiar? Every missed call is money walking out the door. What if clients could book themselves instantly, even at 9 PM?</p>
            </div>
         </div>
      </section>

      <!-- Problem Section -->
      <section class="py-20">
         <div class="container mx-auto px-6 relative">
            <div class="text-center max-w-3xl mx-auto">
               <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">The Reality of Running a Solo Business</h2>
               <p class="mt-4 text-slate-400 text-lg">You're wearing all the hats, and something has to give. Usually, it's missed opportunities.</p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mt-16">
               <!-- Card 1 -->
               <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 transform hover:-translate-y-2 transition-transform duration-300">
                  <div class="bg-red-500/10 text-red-400 rounded-lg w-12 h-12 flex items-center justify-center mb-4 text-2xl">
                     📞
                  </div>
                  <h3 class="font-bold text-white text-lg mb-2">Missed Call = Lost Money</h3>
                  <p class="text-slate-400">New customers call once, get your voicemail, and book somewhere else immediately.</p>
               </div>
               <!-- Card 2 -->
               <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 transform hover:-translate-y-2 transition-transform duration-300">
                  <div class="bg-blue-500/10 text-blue-400 rounded-lg w-12 h-12 flex items-center justify-center mb-4 text-2xl">
                     🔄
                  </div>
                  <h3 class="font-bold text-white text-lg mb-2">Clients Forget to Rebook</h3>
                  <p class="text-slate-400">Happy clients walk out but forget to schedule their next visit, leaving gaps in your calendar.</p>
               </div>
               <!-- Card 3 -->
               <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 transform hover:-translate-y-2 transition-transform duration-300">
                  <div class="bg-yellow-500/10 text-yellow-400 rounded-lg w-12 h-12 flex items-center justify-center mb-4 text-2xl">
                     ⭐
                  </div>
                  <h3 class="font-bold text-white text-lg mb-2">No Reviews = No Growth</h3>
                  <p class="text-slate-400">Without a steady stream of fresh reviews, it's hard to build the trust needed to attract new clients.</p>
               </div>
               <!-- Card 4 -->
               <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 transform hover:-translate-y-2 transition-transform duration-300">
                  <div class="bg-green-500/10 text-green-400 rounded-lg w-12 h-12 flex items-center justify-center mb-4 text-2xl">
                     💰
                  </div>
                  <h3 class="font-bold text-white text-lg mb-2">Expensive, Bloated Software</h3>
                  <p class="text-slate-400">Complex salon software costs a fortune with features you'll never use. You just want more bookings.</p>
               </div>
            </div>
         </div>
      </section>

      <!-- Features Section -->
      <section id="features" class="py-20">
         <div class="container mx-auto px-6 relative">
            <div class="text-center max-w-3xl mx-auto">
               <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">Everything You Need to Fill Your Calendar</h2>
               <p class="mt-4 text-slate-400 text-lg">ProBookingQR isn't just a QR code. It's a complete, automated system designed to bring you more business with less effort.</p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mt-16">
               <div class="bg-slate-800/50 p-8 rounded-2xl border border-slate-700">
                  <h3 class="font-bold text-white text-lg mb-2">Your Own Booking Page</h3>
                  <p class="text-slate-400">Get a simple, beautiful booking page branded for your business. No ugly third-party logos. Just your services, your times, and your brand.</p>
               </div>
               <div class="bg-slate-800/50 p-8 rounded-2xl border border-slate-700">
                  <h3 class="font-bold text-white text-lg mb-2">Unlimited QR Code Scans</h3>
                  <p class="text-slate-400">Put your QR code everywhere: business cards, your front door, social media posts. There are no limits on how many clients can scan and book.</p>
               </div>
               <div class="bg-slate-800/50 p-8 rounded-2xl border border-slate-700">
                  <h3 class="font-bold text-white text-lg mb-2">Google Calendar Sync</h3>
                  <p class="text-slate-400">New appointments appear in your Google Calendar instantly. We block off times you're already busy, so you're never double-booked.</p>
               </div>
               <div class="bg-slate-800/50 p-8 rounded-2xl border border-slate-700">
                  <h3 class="font-bold text-white text-lg mb-2">Automated Reminders</h3>
                  <p class="text-slate-400">Dramatically reduce no-shows with automated SMS reminders sent to your clients 24 hours before their appointment. You don't lift a finger.</p>
               </div>
               <div class="bg-slate-800/50 p-8 rounded-2xl border border-slate-700">
                  <h3 class="font-bold text-white text-lg mb-2">Automatic Review Requests</h3>
                  <p class="text-slate-400">After their appointment, clients automatically get a text asking for a review, with a direct link to your Google or Yelp page. Build your reputation on autopilot.</p>
               </div>
               <div class="bg-slate-800/50 p-8 rounded-2xl border border-slate-700">
                  <h3 class="font-bold text-white text-lg mb-2">Hands-Free Setup</h3>
                  <p class="text-slate-400">There's no complicated software for you to learn. Just answer a few simple questions in our setup chat, and we build the entire system for you in under 24 hours.</p>
               </div>
            </div>
         </div>
      </section>

      <!-- Pricing Section -->
      <section id="pricing" class="py-20">
         <div class="container mx-auto px-6 relative">
            <div class="text-center max-w-3xl mx-auto">
               <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">Simple, Transparent Pricing</h2>
               <p class="mt-4 text-slate-400 text-lg">Choose the plan that's right for you. Cancel anytime.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 mt-12 max-w-4xl mx-auto">
               <!-- Basic Plan -->
               <div class="bg-slate-800 border border-slate-700 rounded-2xl p-8 flex flex-col">
                  <div class="text-center flex-grow">
                     <h3 class="text-2xl font-bold text-white mb-2">Basic Plan</h3>
                     <p class="text-lg font-medium text-slate-400">Perfect for getting started.</p>
                     <div class="flex items-baseline justify-center text-5xl font-extrabold text-white my-4">
                        $25
                        <span class="text-lg font-medium text-slate-400 ml-2">/month</span>
                     </div>
                  </div>
                  <ul class="space-y-4 my-8 text-slate-300 flex-grow">
                     <li class="flex items-start"><span class="text-green-400 w-5 h-5 mr-3 mt-1 shrink-0">✓</span><span>QR Code & Booking Page</span></li>
                     <li class="flex items-start"><span class="text-green-400 w-5 h-5 mr-3 mt-1 shrink-0">✓</span><span>Google Calendar Sync</span></li>
                     <li class="flex items-start"><span class="text-green-400 w-5 h-5 mr-3 mt-1 shrink-0">✓</span><span>Automated SMS Reminders</span></li>
                  </ul>
                  <button onclick="openChatbot()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg transition-transform hover:scale-105">
                     Get Started
                  </button>
               </div>
               <!-- Pro Plan -->
               <div class="bg-slate-800 border-2 border-indigo-500 rounded-2xl p-8 flex flex-col shadow-2xl shadow-indigo-500/10">
                  <div class="text-center flex-grow">
                     <h3 class="text-2xl font-bold text-white mb-2">Pro Plan</h3>
                     <p class="text-lg font-medium text-indigo-400">For professionals ready to grow.</p>
                     <div class="flex items-baseline justify-center text-5xl font-extrabold text-white my-4">
                        $35
                        <span class="text-lg font-medium text-slate-400 ml-2">/month</span>
                     </div>
                  </div>
                  <ul class="space-y-4 my-8 text-slate-300 flex-grow">
                     <li class="flex items-start"><span class="text-green-400 w-5 h-5 mr-3 mt-1 shrink-0">✓</span><span>Everything in Basic, plus:</span></li>
                     <li class="flex items-start"><span class="text-indigo-400 w-5 h-5 mr-3 mt-1 shrink-0">✓</span><span>Automated Review Requests</span></li>
                     <li class="flex items-start"><span class="text-indigo-400 w-5 h-5 mr-3 mt-1 shrink-0">✓</span><span>Win-back & Re-booking Promos</span></li>
                     <li class="flex items-start"><span class="text-indigo-400 w-5 h-5 mr-3 mt-1 shrink-0">✓</span><span>Enhanced Features & More</span></li>
                  </ul>
                  <button onclick="openChatbot()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg transition-transform hover:scale-105">
                     Get Started
                  </button>
               </div>
            </div>
         </div>
      </section>

      <!-- ROI Calculator Section -->
      <section id="roi-calculator" class="py-20">
         <div class="container mx-auto px-6 max-w-4xl relative">
            <div class="bg-slate-800/50 border border-slate-700 rounded-2xl p-8 md:p-12">
               <div class="text-center mb-10">
                  <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">💰 Calculate Your ROI</h2>
                  <p class="mt-4 text-slate-400 text-lg">See how much ProBookingQR can boost your revenue.</p>
               </div>

               <div class="grid md:grid-cols-2 gap-8 items-center">
                  <!-- Inputs -->
                  <div class="space-y-6">
                     <div>
                        <label for="avgService" class="block mb-2 font-semibold text-slate-300">Average Service Price ($)</label>
                        <input type="number" id="avgService" value="75" min="10" max="500" class="w-full bg-slate-700 border-slate-600 text-white rounded-lg p-3">
                     </div>
                     <div>
                        <label for="missedCalls" class="block mb-2 font-semibold text-slate-300">Missed Calls Per Week: <span id="missedCallsValue" class="font-bold text-indigo-400"></span></label>
                        <input type="range" id="missedCalls" class="range-slider" min="1" max="50" value="8">
                     </div>
                     <div>
                        <label for="conversionRate" class="block mb-2 font-semibold text-slate-300">Booking Conversion Rate (%): <span id="conversionValue" class="font-bold text-indigo-400"></span></label>
                        <input type="range" id="conversionRate" class="range-slider" min="10" max="90" value="60">
                     </div>
                     <div>
                        <label for="rebookRate" class="block mb-2 font-semibold text-slate-300">Current Rebook Rate (%): <span id="rebookValue" class="font-bold text-indigo-400"></span></label>
                        <input type="range" id="rebookRate" class="range-slider" min="20" max="80" value="45">
                     </div>
                  </div>
                  <!-- Results -->
                  <div class="bg-slate-900/70 p-8 rounded-2xl border border-indigo-500/30">
                     <h3 class="text-2xl font-bold text-white text-center mb-6">🚀 Your Potential Results</h3>
                     <div class="space-y-4">
                        <div class="flex justify-between items-center bg-slate-800/50 p-3 rounded-lg">
                           <span class="font-medium text-slate-400">New Monthly Bookings</span>
                           <span class="font-bold text-lg text-white" id="newBookings"></span>
                        </div>
                        <div class="flex justify-between items-center bg-slate-800/50 p-3 rounded-lg">
                           <span class="font-medium text-slate-400">Additional Monthly Revenue</span>
                           <span class="font-bold text-lg text-white" id="additionalRevenue"></span>
                        </div>
                        <div class="flex justify-between items-center bg-green-500/10 p-4 rounded-lg">
                           <span class="font-bold text-green-300">Annual Revenue Increase</span>
                           <span class="font-bold text-2xl text-green-300" id="annualIncrease"></span>
                        </div>
                        <div class="flex justify-between items-center bg-slate-800/50 p-3 rounded-lg">
                           <span class="font-medium text-slate-400">ROI on ProBookingQR</span>
                           <span class="font-bold text-lg text-white" id="roi"></span>
                        </div>
                     </div>
                     <p class="text-xs text-slate-500 mt-4 text-center">*Estimates based on industry averages and client data.</p>
                  </div>
               </div>
            </div>
         </div>
      </section>

      <!-- How It Works Section -->
      <section id="how-it-works" class="py-20">
         <div class="container mx-auto px-6 max-w-4xl relative">
            <div class="text-center">
               <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">How It All Works</h2>
            </div>
            <div class="mt-12 space-y-6">
               <details class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 cursor-pointer">
                  <summary class="flex justify-between items-center font-semibold text-white text-lg">How do QR codes work for booking appointments?<span class="plus-icon text-indigo-400 text-3xl transition-transform duration-300">+</span></summary>
                  <div class="text-slate-400 mt-4 space-y-4">
                     <p>QR code booking allows customers to scan a code with their phone camera and instantly access your booking calendar without downloading any apps. The QR code links directly to your online booking form where customers can select services, pick times, and confirm appointments in under 30 seconds.</p>
                  </div>
               </details>
               <details class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 cursor-pointer">
                  <summary class="flex justify-between items-center font-semibold text-white text-lg">What's the easiest way to set up online booking for a small business?<span class="plus-icon text-indigo-400 text-3xl transition-transform duration-300">+</span></summary>
                  <div class="text-slate-400 mt-4 space-y-6">
                     <p>The easiest way to set up online booking is using a QR code booking system that requires no website integration, no app development, and takes under 10 minutes to configure. Simply connect your calendar, customize your services, and generate a QR code that customers can scan to book instantly.</p>
                     <div>
                        <h3 class="font-semibold text-white mb-3">5-Minute Setup Process:</h3>
                        <ol class="list-decimal list-inside space-y-2">
                           <li><strong>Create Account & Connect Calendar:</strong> Sign up and sync with your existing calendar.</li>
                           <li><strong>Add Your Services:</strong> List services with names, durations, and prices.</li>
                           <li><strong>Set Your Availability:</strong> Choose your working hours and days.</li>
                           <li><strong>Generate Your QR Code:</strong> Download it instantly, ready to display anywhere.</li>
                           <li><strong>Start Taking Bookings:</strong> Customers can book immediately.</li>
                        </ol>
                     </div>
                  </div>
               </details>
               <details class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 cursor-pointer">
                  <summary class="flex justify-between items-center font-semibold text-white text-lg">How can I reduce no-shows for appointments?<span class="plus-icon text-indigo-400 text-3xl transition-transform duration-300">+</span></summary>
                  <div class="text-slate-400 mt-4 space-y-6">
                     <p>The most effective way to reduce appointment no-shows is using automated SMS and email reminders sent 24 hours and 2 hours before appointments, combined with requiring confirmation to book. This combination can reduce no-shows by 40-70% immediately.</p>
                     <div>
                        <h3 class="font-semibold text-white mb-3">7 Proven Methods to Reduce No-Shows:</h3>
                        <ol class="list-decimal list-inside space-y-2">
                           <li><strong>Automated SMS & Email Reminders:</strong> The most effective method, reducing no-shows by 38-50%.</li>
                           <li><strong>Require Booking Confirmation:</strong> Ensures genuine commitment from clients.</li>
                           <li><strong>Implement a Cancellation Policy:</strong> Communicates professionalism and the value of your time.</li>
                           <li><strong>Collect Payments or Deposits:</strong> Financial commitment dramatically increases attendance.</li>
                           <li><strong>Make Rescheduling Easy:</strong> Many no-shows happen because rescheduling seems difficult.</li>
                           <li><strong>Optimize Booking Windows:</strong> Limit how far in advance customers can book.</li>
                           <li><strong>Follow Up After No-Shows:</strong> A friendly follow-up can improve future attendance.</li>
                        </ol>
                     </div>
                  </div>
               </details>
            </div>
         </div>
      </section>

      <!-- FAQ Section -->
      <section id="faq" class="py-20">
         <div class="container mx-auto px-6 max-w-4xl relative">
            <div class="text-center">
               <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">Frequently Asked Questions</h2>
            </div>
            <div class="mt-12 space-y-6">
               <details class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 cursor-pointer">
                  <summary class="flex justify-between items-center font-semibold text-white text-lg">What if I already have a website?<span class="plus-icon text-indigo-400 text-3xl transition-transform duration-300">+</span></summary>
                  <p class="text-slate-400 mt-4">That's perfect! You can easily add your ProBookingQR link or QR code to your existing site with a "Book Now" button. This system is designed to complement what you already have, not replace it. It's a lightweight, dedicated booking engine.</p>
               </details>
               <details class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 cursor-pointer">
                  <summary class="flex justify-between items-center font-semibold text-white text-lg">Can I block off personal time?<span class="plus-icon text-indigo-400 text-3xl transition-transform duration-300">+</span></summary>
                  <p class="text-slate-400 mt-4">Yes. Since ProBookingQR syncs directly with your Google Calendar, all you have to do is create an event in your calendar for your personal time (like "Doctor's Appointment" or "Lunch"). Our system will see that you're busy and won't show that time as available for booking.</p>
               </details>
               <details class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 cursor-pointer">
                  <summary class="flex justify-between items-center font-semibold text-white text-lg">What do I need to get started?<span class="plus-icon text-indigo-400 text-3xl transition-transform duration-300">+</span></summary>
                  <p class="text-slate-400 mt-4">Just two things: 1) The ability to answer a few simple questions about your business (your name, services, hours), and 2) A Google Calendar account to sync your appointments to. That's it. We handle all the technical setup.</p>
               </details>
               <details class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 cursor-pointer">
                  <summary class="flex justify-between items-center font-semibold text-white text-lg">Is it really unlimited? What's the catch?<span class="plus-icon text-indigo-400 text-3xl transition-transform duration-300">+</span></summary>
                  <p class="text-slate-400 mt-4">No catch. For the flat monthly fee, you get unlimited bookings, unlimited client reminders, and unlimited review requests. We want you to grow. Our price stays the same whether you get 10 bookings or 1,000.</p>
               </details>
            </div>
         </div>
      </section>

      <!-- Final CTA Section -->
      <section class="bg-indigo-600">
         <div class="container mx-auto px-6 py-20 text-center relative">
            <h2 class="text-3xl md:text-4xl font-bold text-white">Ready to Stop Missing Bookings?</h2>
            <p class="mt-4 text-indigo-200 text-lg max-w-2xl mx-auto">Join over 200 service professionals already using ProBookingQR to fill their calendars automatically.</p>
            <button onclick="openChatbot()" class="mt-8 inline-block bg-white hover:bg-slate-100 text-indigo-600 font-bold text-lg px-8 py-4 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105">
               Get Started
            </button>
            <p class="mt-4 text-indigo-200 text-sm">Setup is hands-free and takes less than 24 hours.</p>
         </div>
      </section>
   </main>
   <!-- Footer -->
   <footer class="bg-slate-900 border-t border-slate-800">
      <div class="container mx-auto px-6 py-8 text-center text-slate-500">
         <p>© <span id="current-year">2025</span> ProBookingQR. All rights reserved.</p>
      </div>
   </footer>

   <!-- Chatbot Modal -->
   <div id="chatbot-modal" role="dialog" aria-modal="true" aria-labelledby="chatbot-heading">
      <div class="chatbot-container">
         <div class="chatbot-content">
            <button onclick="closeChatbot()" class="chatbot-close-btn" aria-label="Close Chatbot">×</button>
            <div id="chatbot-root" class="w-full h-full"></div>
         </div>
      </div>
   </div>

   <script>
      let ProBookingChatbot; // Will be defined by Babel
      const modal = document.getElementById('chatbot-modal');
      const focusableElementsString = 'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]';
      let focusableElements;
      let firstFocusableElement;
      let lastFocusableElement;

      function openChatbot() {
         modal.style.display = 'block';
         document.body.style.overflow = 'hidden';

         // Render React component
         if (ProBookingChatbot) {
            ReactDOM.render(React.createElement(ProBookingChatbot), document.getElementById('chatbot-root'));
         }

         // Accessibility: Trap focus inside the modal
         focusableElements = modal.querySelectorAll(focusableElementsString);
         if (focusableElements.length > 0) {
            firstFocusableElement = focusableElements[0];
            lastFocusableElement = focusableElements[focusableElements.length - 1];
            firstFocusableElement.focus();
            modal.addEventListener('keydown', trapFocus);
         }
      }

      function closeChatbot() {
         modal.style.display = 'none';
         document.body.style.overflow = 'auto';

         // Unmount React component
         const chatbotRoot = document.getElementById('chatbot-root');
         if (chatbotRoot) {
            ReactDOM.unmountComponentAtNode(chatbotRoot);
         }
         modal.removeEventListener('keydown', trapFocus);
      }

      // Close modal on outside click
      document.addEventListener('click', function(event) {
         if (event.target === modal) {
            closeChatbot();
         }
      });

      // Close modal with Escape key
      document.addEventListener('keydown', function(event) {
         if (event.key === 'Escape' && modal.style.display === 'block') {
            closeChatbot();
         }
      });

      function trapFocus(e) {
         if (e.key !== 'Tab' || !firstFocusableElement) {
            return;
         }
         if (e.shiftKey) { // Shift + Tab
            if (document.activeElement === firstFocusableElement) {
               lastFocusableElement.focus();
               e.preventDefault();
            }
         } else { // Tab
            if (document.activeElement === lastFocusableElement) {
               firstFocusableElement.focus();
               e.preventDefault();
            }
         }
      }

      // Dynamically update footer year
      document.getElementById('current-year').textContent = new Date().getFullYear();

      // ROI Calculator Script
      function setupROICalculator() {
         const avgServiceInput = document.getElementById('avgService');
         const missedCallsInput = document.getElementById('missedCalls');
         const conversionRateInput = document.getElementById('conversionRate');
         const rebookRateInput = document.getElementById('rebookRate');

         const missedCallsValueSpan = document.getElementById('missedCallsValue');
         const conversionValueSpan = document.getElementById('conversionValue');
         const rebookValueSpan = document.getElementById('rebookValue');

         const newBookingsSpan = document.getElementById('newBookings');
         const additionalRevenueSpan = document.getElementById('additionalRevenue');
         const annualIncreaseSpan = document.getElementById('annualIncrease');
         const roiSpan = document.getElementById('roi');

         function updateCalculation() {
            const avgService = parseFloat(avgServiceInput.value) || 75;
            const missedCalls = parseInt(missedCallsInput.value);
            const conversionRate = parseInt(conversionRateInput.value) / 100;
            const rebookRate = parseInt(rebookRateInput.value) / 100;

            // Update slider displays
            missedCallsValueSpan.textContent = missedCalls;
            conversionValueSpan.textContent = conversionRateInput.value + '%';
            rebookValueSpan.textContent = rebookRateInput.value + '%';

            // --- Revised & Corrected Calculations ---

            // 1. Calculate new bookings from captured missed calls
            const monthlyLostBookings = (missedCalls * conversionRate) * 4.33;
            const capturedBookings = monthlyLostBookings * 0.85; // Assume 85% of missed calls are captured

            // 2. Calculate additional bookings from improved rebooking rate on the NEWLY captured clients
            // A 20% improvement on the existing rate, capped at 85% total.
            const improvedRebookRate = Math.min(rebookRate * 1.20, 0.85);
            const rebookingLift = improvedRebookRate - rebookRate;
            const additionalRebookings = capturedBookings * rebookingLift;

            // 3. Total new appointments and revenue
            const totalNewBookings = Math.round(capturedBookings + additionalRebookings);
            const additionalRevenue = totalNewBookings * avgService;
            const annualIncrease = additionalRevenue * 12;

            // 4. Calculate ROI based on correct annual cost (using Pro plan for this example)
            const annualCost = 35 * 12;
            const roi = annualCost > 0 ? ((annualIncrease - annualCost) / annualCost * 100) : 0;

            // Update display
            newBookingsSpan.textContent = `${totalNewBookings} appointments`;
            additionalRevenueSpan.textContent = `$${Math.round(additionalRevenue).toLocaleString()}`;
            annualIncreaseSpan.textContent = `$${Math.round(annualIncrease).toLocaleString()}`;
            roiSpan.textContent = `${Math.round(roi).toLocaleString()}%`;
         }

         [avgServiceInput, missedCallsInput, conversionRateInput, rebookRateInput].forEach(input => {
            input.addEventListener('input', updateCalculation);
         });

         // Initial calculation on page load
         updateCalculation();
      }

      // Ensure the calculator is set up after the DOM is loaded
      if (document.readyState === 'loading') {
         document.addEventListener('DOMContentLoaded', setupROICalculator);
      } else {
         setupROICalculator();
      }
   </script>

   <!-- React Chatbot Component Definition -->
   <script type="text/babel">
      const { useState, useEffect, useRef } = React;

        const firebaseConfigFromWindow = window.__firebase_config ? JSON.parse(window.__firebase_config) : null;
        const appIdFromWindow = window.__app_id || 'default-app-id';
        const initialAuthTokenFromWindow = window.__initial_auth_token || null;
        const FORMSPREE_ENDPOINT_URL = "https://formspree.io/f/your_form_id";

        const INITIAL_USER_DATA = {
            firstName: '', phoneNumber: '', emailAddress: '', 
            salonName: '', specializedServices: [], serviceDurations: {}, 
            bufferTime: '', workingDays: [], workingHours: {},
            lunchBreak: { takes: 'No', duration: '', schedule: {} }, 
            bookingAdvance: '', cancellationPolicy: '', clientVolume: ''
        };

        const SPECIALIZED_SERVICES_OPTIONS = ['Hair Cutting (all types)', 'Hair Coloring & Highlights', 'Styling & Blowouts', 'Chemical Services (perms, relaxers)', 'Special Event Styling', 'Hair Extensions', 'Other'];
        const SERVICE_DURATION_OPTIONS = ['15 minutes', '30 minutes', '45 minutes', '1 hour', '1.5 hours', '2 hours', '2.5 hours', '3 hours', '3+ hours'];
        const BUFFER_TIME_OPTIONS = ['0 minutes (no buffer)', '5 minutes', '10 minutes', '15 minutes', '20 minutes', '30 minutes'];
        const WORKING_DAYS_OPTIONS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        const TIME_OPTIONS = Array.from({ length: (22 - 6) * 2 + 1 }, (_, i) => { const hour = 6 + Math.floor(i / 2); const minute = i % 2 === 0 ? '00' : '30'; const period = hour < 12 ? 'AM' : 'PM'; const displayHour = hour > 12 ? hour - 12 : (hour === 0 ? 12 : hour); return `${displayHour}:${minute} ${period}`; });
        const LUNCH_TIME_OPTIONS = Array.from({ length: (18 - 11) * 2 + 1 }, (_, i) => { const hour = 11 + Math.floor(i / 2); const minute = i % 2 === 0 ? '00' : '30'; const period = hour < 12 ? 'AM' : 'PM'; const displayHour = hour > 12 ? hour - 12 : (hour === 0 ? 12 : hour); return `${displayHour}:${minute} ${period}`; });
        const BOOKING_ADVANCE_OPTIONS = ['Same day booking allowed', '1 day advance required', '2 days advance required', '1 week advance required'];
        const CANCELLATION_POLICIES_OPTIONS = ['24 hours notice required for cancellation', '48 hours notice required for cancellation', '72 hours notice required for cancellation', 'No cancellation fee', 'Custom policy (will be displayed to clients)'];

        const CONVERSATION_STEPS = [
            { id: 'welcome', botMessage: "Hi! I'm here to help set up your stylist profile. This will take about 5 minutes. Let's start with your first name.", inputType: 'text', field: 'firstName', placeholder: 'Enter your first name...' },
            { id: 'phone', botMessage: "Great! What's your phone number for client communications?", inputType: 'tel', field: 'phoneNumber', placeholder: 'Enter your phone number...' },
            { id: 'email', botMessage: "What's your email for booking notifications?", inputType: 'email', field: 'emailAddress', placeholder: 'Enter your email...' },
            { id: 'salon_name', botMessage: "Now let's get your salon details! What's the name of the salon where you work?", inputType: 'text', field: 'salonName', placeholder: 'Enter salon name...' },
            { id: 'specialized_services', botMessage: "Now let's set up your services! What services do you specialize in? Select all that apply.", inputType: 'multiselect', field: 'specializedServices', options: SPECIALIZED_SERVICES_OPTIONS, maxSelections: 7 },
            { id: 'start_service_durations', botMessage: (data) => `Great! Now let's set the time for each service.`, inputType: 'service_duration_start' },
            { id: 'buffer_time', botMessage: "Perfect! Do you prefer buffer time between appointments?", inputType: 'choice', field: 'bufferTime', options: BUFFER_TIME_OPTIONS },
            { id: 'working_days', botMessage: "Now your schedule. Which days do you work?", inputType: 'multiselect', field: 'workingDays', options: WORKING_DAYS_OPTIONS, maxSelections: 7 },
            { id: 'start_working_hours', botMessage: "Let's set your hours for each day you selected.", inputType: 'schedule_start' },
            { id: 'lunch_break', botMessage: "Do you take a lunch break?", inputType: 'choice', field: 'lunchBreak.takes', options: ['Yes', 'No'] },
            { id: 'lunch_break_duration', botMessage: "How long is your lunch break?", inputType: 'choice', field: 'lunchBreak.duration', options: ['30 minutes', '1 hour'], condition: (data) => data.lunchBreak.takes === 'Yes' },
            { id: 'start_lunch_schedule', botMessage: "Great. Let's set the start time for your lunch on each day.", inputType: 'lunch_schedule_start', condition: (data) => data.lunchBreak.takes === 'Yes' },
            { id: 'booking_advance', botMessage: "How far in advance can clients book?", inputType: 'choice', field: 'bookingAdvance', options: BOOKING_ADVANCE_OPTIONS },
            { id: 'cancellation_policy', botMessage: "What's your cancellation policy?", inputType: 'choice', field: 'cancellationPolicy', options: CANCELLATION_POLICIES_OPTIONS },
            { id: 'client_volume', botMessage: "On average, how many clients do you see per day?", inputType: 'choice', field: 'clientVolume', options: ['1-6 clients', '7+ clients'] },
            { id: 'payment', botMessage: "Awesome! You're all set. Please choose a plan below to activate your booking system.", inputType: 'payment' }
        ];
        
        const TypingIndicator = () => (<div className="flex justify-start"><div className="p-3 rounded-2xl bg-slate-200 rounded-bl-lg"><div className="typing-indicator"><span /><span /><span /></div></div></div>);
        const TextInput = ({ onSubmit, placeholder, disabled, type, optional }) => {
            const [input, setInput] = useState('');
            const handleChange = (e) => { type === 'tel' ? setInput(e.target.value.replace(/\D/g, '')) : setInput(e.target.value); };
            const handleSubmit = (e) => { e.preventDefault(); if (!input.trim() && !optional) return; onSubmit(input.trim()); setInput(''); };
            return (<form onSubmit={handleSubmit} className="flex items-center space-x-2"><input type={type || 'text'} value={input} onChange={handleChange} placeholder={placeholder} className="flex-1 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none" disabled={disabled} autoFocus /><button type="submit" disabled={disabled || (!input.trim() && !optional)} className="bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-indigo-300">Send</button></form>);
        };
        const ChoiceInput = ({ options, onSelect, disabled, label, selectedValue }) => (<div className="space-y-2">{label && <p className="text-sm font-semibold text-slate-600 mb-2">{label}</p>}{options.map(option => { const isSelected = selectedValue === option; return (<button key={option} onClick={() => onSelect(option)} disabled={disabled} className={`w-full p-3 border rounded-lg text-left transition-colors disabled:opacity-50 ${isSelected ? 'bg-indigo-600 text-white border-indigo-600' : 'bg-white border-slate-300 hover:bg-indigo-50 hover:border-indigo-300'}`}>{option}</button>); })}</div>);
        const MultiSelectInput = ({ options, field, userData, setUserData, onComplete }) => {
            const selection = userData[field] || [];
            const handleToggle = (option) => { setUserData(prev => { const current = prev[field] || []; const isSelected = current.includes(option); return isSelected ? { ...prev, [field]: current.filter(item => item !== option) } : { ...prev, [field]: [...current, option] }; }); };
            return (<div><div className="grid grid-cols-1 gap-2 mb-3">{options.map(option => { const isSelected = selection.includes(option); return (<button key={option} onClick={() => handleToggle(option)} className={`p-3 border rounded-lg text-sm text-left transition-colors ${isSelected ? 'bg-indigo-600 text-white border-indigo-600' : 'bg-white text-slate-700 hover:bg-slate-50'}`}>{option} {isSelected && '✓'}</button>); })}</div><button onClick={onComplete} disabled={selection.length === 0} className="w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-indigo-300">Continue ({selection.length} selected)</button></div>);
        };
        const ServiceDurationInput = ({ service, onSelect, disabled }) => (<div className="space-y-2"><p className="text-sm font-semibold text-slate-600 mb-2">How long does this service take?</p><div className="p-3 bg-indigo-50 border border-indigo-200 rounded-lg text-indigo-800 font-bold mb-3">{service}</div>{SERVICE_DURATION_OPTIONS.map(option => (<button key={option} onClick={() => onSelect(option)} disabled={disabled} className="w-full p-3 bg-white border border-slate-300 hover:bg-indigo-50 hover:border-indigo-300 rounded-lg text-left transition-colors disabled:opacity-50">{option}</button>))}</div>);
        const TimeToggle = ({ time, onTimeChange, disabled }) => {
            const currentIndex = TIME_OPTIONS.indexOf(time);
            const handleUp = () => { const nextIndex = (currentIndex + 1) % TIME_OPTIONS.length; onTimeChange(TIME_OPTIONS[nextIndex]); };
            const handleDown = () => { const prevIndex = (currentIndex - 1 + TIME_OPTIONS.length) % TIME_OPTIONS.length; onTimeChange(TIME_OPTIONS[prevIndex]); };
            return (<div className="flex items-center space-x-2"><div className="flex-1 text-center font-semibold text-indigo-700 p-2 bg-indigo-100 rounded-md">{time || 'Set Time'}</div><div className="flex flex-col"><button onClick={handleUp} disabled={disabled} className="px-2 py-0.5 rounded-t-md text-indigo-700 hover:bg-indigo-200 disabled:opacity-50">▲</button><button onClick={handleDown} disabled={disabled} className="px-2 py-0.5 rounded-b-md text-indigo-700 hover:bg-indigo-200 disabled:opacity-50">▼</button></div></div>);
        };
        const ScheduleInput = ({ days, onComplete, savedHours, disabled }) => {
            const [hours, setHours] = useState(savedHours);
            const handleTimeChange = (day, part, time) => { setHours(prev => ({ ...prev, [day]: { ...prev[day], [part]: time } })); };
            const allDaysSet = days.every(day => hours[day] && hours[day].start && hours[day].end);
            return (<div className="space-y-4"><div className="space-y-3">{days.map(day => (<div key={day} className="grid grid-cols-12 gap-2 items-center"><div className="col-span-2 font-bold text-slate-700">{day.substring(0,3)}</div><div className="col-span-5"><TimeToggle time={hours[day] ? hours[day].start : null} onTimeChange={(time) => handleTimeChange(day, 'start', time)} disabled={disabled} /></div><div className="col-span-5"><TimeToggle time={hours[day] ? hours[day].end : null} onTimeChange={(time) => handleTimeChange(day, 'end', time)} disabled={disabled} /></div></div>))}</div>{allDaysSet && <button onClick={() => onComplete(hours)} className="w-full p-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600">Finish Schedule Setup</button>}</div>);
        };
        const SelectInput = ({ options, value, onChange, disabled, placeholder }) => (<select value={value || ''} onChange={(e) => onChange(e.target.value)} disabled={disabled} className="w-full p-3 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"><option value="" disabled>{placeholder}</option>{options.map(option => <option key={option} value={option}>{option}</option>)}</select>);
        const LunchScheduleInput = ({ days, onComplete, savedTimes, disabled }) => {
            const [lunchTimes, setLunchTimes] = useState(savedTimes || {});
            const handleTimeChange = (day, time) => { setLunchTimes(prev => ({ ...prev, [day]: time })); };
            const allDaysSet = days.every(day => lunchTimes[day]);
            return (<div className="space-y-4"><p className="text-sm font-semibold text-slate-600 mb-2">Set the start time for your lunch break on each day you work.</p><div className="space-y-3">{days.map(day => (<div key={day} className="grid grid-cols-3 gap-2 items-center"><div className="col-span-1 font-bold text-slate-700">{day}</div><div className="col-span-2"><SelectInput options={LUNCH_TIME_OPTIONS} value={lunchTimes[day]} onChange={(time) => handleTimeChange(day, time)} disabled={disabled} placeholder="Select Lunch Time" /></div></div>))}</div>{allDaysSet && (<button onClick={() => onComplete(lunchTimes)} className="w-full p-3 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600">Finish Lunch Setup</button>)}</div>);
        };
        const PaymentButtons = ({ userData, onPayment }) => {
            const isHighVolume = userData.clientVolume === '7+ clients';
            const handlePayment = (plan, price, stripeUrl) => { onPayment(plan, price, stripeUrl); };
            return (<div className="space-y-4">{isHighVolume && ( <div className="p-3 bg-blue-50 border border-blue-200 text-blue-800 text-sm rounded-lg text-center"> Based on your volume, we've selected our Pro plan for the best experience. </div> )} {!isHighVolume && ( <button onClick={() => handlePayment('Basic plan', '$25/mo', 'https://buy.stripe.com/dRmeVc1BP5HW6BVeP3bbG06')} className="w-full p-4 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 transition-transform hover:scale-105"> Basic plan - $25/mo </button> )} <button onClick={() => handlePayment('Pro Plan', '$35/mo', 'https://buy.stripe.com/fZu9AS4O13zOf8r6ixbbG07')} className="w-full p-4 bg-violet-600 text-white rounded-lg font-bold hover:bg-violet-700 transition-transform hover:scale-105"> Pro Plan - $35/mo </button></div>);
        };

        ProBookingChatbot = () => {
            const [db, setDb] = useState(null); const [userId, setUserId] = useState(null); const [isLoadingState, setIsLoadingState] = useState(true);
            const [currentStep, setCurrentStep] = useState(0); const [messages, setMessages] = useState([]); const [userData, setUserData] = useState(INITIAL_USER_DATA);
            const [isTyping, setIsTyping] = useState(false); const [isCollectingDurations, setIsCollectingDurations] = useState(false);
            const [currentServiceIndex, setCurrentServiceIndex] = useState(0); const [isCollectingSchedules, setIsCollectingSchedules] = useState(false);
            const [isCollectingLunches, setIsCollectingLunches] = useState(false);
            const messagesEndRef = useRef(null);

            useEffect(() => { if (!firebaseConfigFromWindow || !window.firebaseServices) { setIsLoadingState(false); return; } const { initializeApp, getFirestore, getAuth, onAuthStateChanged, signInAnonymously, signInWithCustomToken } = window.firebaseServices; try { const app = initializeApp(firebaseConfigFromWindow); const auth = getAuth(app); setDb(getFirestore(app)); onAuthStateChanged(auth, user => { if (user) setUserId(user.uid); }); if (!auth.currentUser) { (initialAuthTokenFromWindow ? signInWithCustomToken(auth, initialAuthTokenFromWindow) : signInAnonymously(auth)).catch(err => signInAnonymously(auth)); } else { setUserId(auth.currentUser.uid); } } catch (error) { setIsLoadingState(false); } }, []);
            useEffect(() => { if (!userId || !db) return; const { doc, getDoc } = window.firebaseServices; const docRef = doc(db, 'artifacts', appIdFromWindow, 'users', userId, 'onboardingState', 'data'); getDoc(docRef).then(docSnap => { if (docSnap.exists()) { const { userData: sData, currentStep: sStep, messages: sMsgs, currentServiceIndex: sServIdx, isCollectingDurations: sCollDur, isCollectingSchedules: sCollSch, isCollectingLunches: sCollLunch } = docSnap.data(); if (sMsgs && sMsgs.length > 0) { setUserData(sData || INITIAL_USER_DATA); setCurrentStep(sStep || 0); setMessages(sMsgs || []); setCurrentServiceIndex(sServIdx || 0); setIsCollectingDurations(sCollDur || false); setIsCollectingSchedules(sCollSch || false); setIsCollectingLunches(sCollLunch || false); } } }).finally(() => setIsLoadingState(false)); }, [userId, db]);
            useEffect(() => { if (isLoadingState || !userId || !db || messages.length === 0) return; const { doc, setDoc } = window.firebaseServices; const stateToSave = { userData, currentStep, messages, currentServiceIndex, isCollectingDurations, isCollectingSchedules, isCollectingLunches }; const docRef = doc(db, 'artifacts', appIdFromWindow, 'users', userId, 'onboardingState', 'data'); setDoc(docRef, stateToSave, { merge: true }); }, [userData, currentStep, messages, currentServiceIndex, isCollectingDurations, isCollectingSchedules, isCollectingLunches]);
            useEffect(() => { if (messagesEndRef.current) { messagesEndRef.current.scrollIntoView({ behavior: "smooth" }); } }, [messages, isTyping]);
            
            useEffect(() => { if (!isLoadingState && messages.length === 0) { addBotMessage(CONVERSATION_STEPS[0].botMessage, 500); } }, [isLoadingState]);
            const addMessage = (type, content) => setMessages(prev => [...prev, { type, content, id: Date.now() + Math.random() }]);
            const addBotMessage = (message, delay = 1000) => { setIsTyping(true); setTimeout(() => { addMessage('bot', message); setIsTyping(false); }, delay); };
            const goToNextStep = (currentData) => {
                let nextStepIndex = currentStep + 1; let nextStep = CONVERSATION_STEPS[nextStepIndex];
                while (nextStep && nextStep.condition && !nextStep.condition(currentData)) { nextStepIndex++; nextStep = CONVERSATION_STEPS[nextStepIndex]; }
                if (nextStep) {
                    const messageContent = typeof nextStep.botMessage === 'function' ? nextStep.botMessage(currentData) : nextStep.botMessage;
                    addBotMessage(messageContent); setCurrentStep(nextStepIndex);
                    if (nextStep.inputType === 'service_duration_start') { setIsCollectingDurations(true); setCurrentServiceIndex(0); }
                    if (nextStep.inputType === 'schedule_start') { setIsCollectingSchedules(true); }
                    if (nextStep.inputType === 'lunch_schedule_start') { setIsCollectingLunches(true); }
                }
            };
            const processResponse = (field, value) => {
                addMessage('user', Array.isArray(value) ? `Selected: ${value.join(', ')}` : value); const newData = { ...userData };
                if (field.includes('.')) { const [key, subkey] = field.split('.'); newData[key] = { ...newData[key], [subkey]: value }; } else { newData[field] = value; }
                setUserData(newData); setTimeout(() => goToNextStep(newData), 500);
            };
            const handleServiceDuration = (duration) => {
                const service = userData.specializedServices[currentServiceIndex]; addMessage('user', `${service}: ${duration}`);
                const newDurations = { ...userData.serviceDurations, [service]: duration }; setUserData(prev => ({ ...prev, serviceDurations: newDurations }));
                const nextServiceIndex = currentServiceIndex + 1;
                if (nextServiceIndex < userData.specializedServices.length) { setCurrentServiceIndex(nextServiceIndex); } else { setIsCollectingDurations(false); setTimeout(() => goToNextStep({ ...userData, serviceDurations: newDurations }), 500); }
            };
            const handleScheduleComplete = (hours) => {
                addMessage('user', 'Schedule setup complete.'); setIsCollectingSchedules(false);
                const newData = {...userData, workingHours: hours }; setUserData(newData);
                setTimeout(() => goToNextStep(newData), 500);
            };
            const handleLunchScheduleComplete = (lunchSchedule) => {
                addMessage('user', 'Lunch schedule set.'); setIsCollectingLunches(false);
                const newData = {...userData, lunchBreak: { ...userData.lunchBreak, schedule: lunchSchedule }}; setUserData(newData);
                setTimeout(() => goToNextStep(newData), 500);
            };
            const handlePayment = (plan, price, stripeUrl) => {
                const finalUserData = { ...userData, selectedPlan: plan, price: price };
                setUserData(finalUserData);
                fetch(FORMSPREE_ENDPOINT_URL, { method: 'POST', body: JSON.stringify(finalUserData), headers: { 'Accept': 'application/json' } });
                window.open(stripeUrl, '_blank');
                addMessage('bot', `Great! You've selected the ${plan}. Please complete your payment in the new tab. Your onboarding is complete!`);
            };

            const renderInput = () => {
                if (isLoadingState || isTyping) return null;
                if (isCollectingDurations) { return <ServiceDurationInput service={userData.specializedServices[currentServiceIndex]} onSelect={handleServiceDuration} disabled={isTyping} />; }
                if (isCollectingSchedules) { return <ScheduleInput days={userData.workingDays} onComplete={handleScheduleComplete} savedHours={userData.workingHours} disabled={isTyping} />; }
                if (isCollectingLunches) { return <LunchScheduleInput days={userData.workingDays} onComplete={handleLunchScheduleComplete} savedTimes={userData.lunchBreak.schedule} disabled={isTyping} />; }
                const step = CONVERSATION_STEPS[currentStep]; if (!step) return null;
                switch (step.inputType) {
                    case 'text': case 'email': case 'tel': return <TextInput onSubmit={(val) => processResponse(step.field, val)} placeholder={step.placeholder} disabled={isTyping} type={step.inputType} optional={step.optional} />;
                    case 'choice': const label = typeof step.botMessage === 'function' ? step.botMessage(userData) : step.botMessage; return <ChoiceInput options={step.options} onSelect={(val) => processResponse(step.field, val)} disabled={isTyping} label={label}/>;
                    case 'multiselect': return <MultiSelectInput options={step.options} field={step.field} userData={userData} setUserData={setUserData} onComplete={() => processResponse(step.field, userData[step.field])} />;
                    case 'payment': return <PaymentButtons userData={userData} onPayment={handlePayment} />;
                    default: return null;
                }
            };
            
            const progress = (currentStep / (CONVERSATION_STEPS.length - 1)) * 100;
            return (<div className="flex flex-col h-full bg-slate-100 text-slate-800"><div className="bg-indigo-600 text-white p-4 text-center shadow-md"><h1 className="font-bold text-lg">Stylist Onboarding</h1><div className="w-full bg-indigo-400 rounded-full h-1.5 mt-2"><div className="bg-white h-1.5 rounded-full" style={{ width: `${progress}%`, transition: 'width 0.5s ease' }}></div></div></div><div className="flex-1 overflow-y-auto p-4 space-y-4" aria-live="polite">{isLoadingState ? <div className="flex justify-center items-center h-full"><TypingIndicator /></div> : (<React.Fragment>{messages.map(msg => (<div key={msg.id} className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}><div className={`max-w-xs md:max-w-md p-3 rounded-2xl whitespace-pre-wrap shadow-sm ${msg.type === 'user' ? 'bg-indigo-600 text-white rounded-br-lg' : 'bg-slate-200 text-slate-800 rounded-bl-lg'}`}>{msg.content}</div></div>))}{isTyping && <TypingIndicator />}<div ref={messagesEndRef} /></React.Fragment>)}</div><div className="p-4 bg-white border-t border-slate-200">{renderInput()}</div></div>);
        };
   </script>
</body>

</html>