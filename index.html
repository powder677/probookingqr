<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <!-- SEO & Page Info -->
   <title>ProBookingQR | Stop Losing Clients to Missed Calls</title>
   <meta name="description" content="ProBookingQR helps solo professionals capture more clients with 24/7 automated booking via QR codes. No missed calls, no complex software.">

   <!-- Favicon -->
   <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ö°Ô∏è</text></svg>">

   <!-- Social Media Sharing (Open Graph & Twitter) -->
   <meta property="og:title" content="ProBookingQR | Stop Losing Clients to Missed Calls">
   <meta property="og:description" content="Automated QR-to-Book system for solo service pros. Book more clients without missing calls.">
   <meta property="og:image" content="https://placehold.co/1200x630/1e293b/93c5fd?text=ProBookingQR">
   <meta property="og:url" content="https://your-domain.com/">
   <meta name="twitter:card" content="summary_large_image">

   <!-- Google Fonts: Inter -->
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

   <!-- Tailwind CSS -->
   <script src="https://cdn.tailwindcss.com"></script>

   <!-- React -->
   <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
   <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
   <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>


   <style>
      /* Custom styles to supplement Tailwind */
      body {
         font-family: 'Inter', sans-serif;
         -webkit-font-smoothing: antialiased;
         -moz-osx-font-smoothing: grayscale;
      }

      .text-glow {
         text-shadow: 0 0 15px rgba(255, 255, 255, 0.5), 0 0 25px rgba(255, 255, 255, 0.3);
      }

      .bg-grid-pattern {
         background-image: linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
         background-size: 20px 20px;
      }

      .loader {
         border: 4px solid #f3f3f3;
         border-top: 4px solid #f97316;
         border-radius: 50%;
         width: 30px;
         height: 30px;
         animation: spin 1s linear infinite;
      }

      .typing-indicator span {
         height: 8px;
         width: 8px;
         background-color: #a8a29e;
         border-radius: 50%;
         display: inline-block;
         margin: 0 1px;
         animation: bounce 0.6s infinite alternate;
      }

      .typing-indicator span:nth-child(2) {
         animation-delay: 0.2s;
      }

      .typing-indicator span:nth-child(3) {
         animation-delay: 0.4s;
      }

      @keyframes spin {
         0% {
            transform: rotate(0deg);
         }

         100% {
            transform: rotate(360deg);
         }
      }

      @keyframes bounce {
         to {
            opacity: 0.3;
            transform: translate3d(0, -4px, 0);
         }
      }

      /* Styles for the chatbot modal */
      #chatbot-modal {
         display: none;
         position: fixed;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         z-index: 9999;
         padding: 1rem;
         align-items: center;
         justify-content: center;
         background-color: rgba(0, 0, 0, 0.7);
         backdrop-filter: blur(4px);
      }

      #chatbot-root {
         width: 100%;
         max-width: 32rem;
         /* 512px */
         height: 100%;
         max-height: calc(100vh - 2rem);
         margin: 0 auto;
      }

      @media (max-width: 640px) {
         #chatbot-modal {
            padding: 0;
         }

         #chatbot-root {
            max-width: none;
            max-height: none;
            border-radius: 0;
         }

         #chatbot-modal .chatbot-container {
            border-radius: 0;
         }
      }
   </style>
</head>

<body class="bg-slate-900 text-slate-300">

   <!-- Header -->
   <header class="bg-slate-900/80 backdrop-blur-sm sticky top-0 z-40">
      <div class="container mx-auto px-6 py-4 flex justify-between items-center">
         <a href="#" class="text-2xl font-bold text-white">
            ProBooking<span class="text-indigo-400">QR</span>
         </a>
      </div>
   </header>

   <!-- Main Content -->
   <main class="relative overflow-hidden">
      <div class="absolute inset-0 bg-grid-pattern opacity-60"></div>
      <div class="absolute inset-0 bg-gradient-to-b from-slate-900 via-slate-900/80 to-slate-900"></div>

      <!-- Hero Section -->
      <section class="relative container mx-auto px-6 py-20 md:py-32 text-center">
         <div class="max-w-4xl mx-auto">
            <div class="inline-block bg-indigo-500/10 text-indigo-400 text-sm font-semibold px-4 py-1 rounded-full mb-4">
               24/7 Automated Booking
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-6 leading-tight text-glow">
               Stop Losing Clients to Missed Calls.
            </h1>
            <p class="text-lg md:text-xl text-slate-400 max-w-2xl mx-auto mb-10">
               Turn your business into a booking machine that works around the clock, even when you're busy with other clients.
            </p>
            <a href="javascript:void(0)" onclick="openChatbot()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold text-lg px-8 py-4 rounded-xl shadow-lg shadow-indigo-500/20 transition-all duration-300 transform hover:scale-105">
               Get Your QR-to-Book System
            </a>

            <div class="mt-16 bg-slate-800/50 backdrop-blur-md p-6 rounded-2xl max-w-2xl mx-auto border border-slate-700">
               <h3 class="font-bold text-white text-lg">"I missed 3 calls while doing hair today..."</h3>
               <p class="text-slate-400 mt-2">Sound familiar? Every missed call is money walking out the door. What if clients could book themselves instantly, even at 9 PM?</p>
            </div>
         </div>
      </section>

      <!-- Problem Section -->
      <section class="py-20">
         <div class="container mx-auto px-6 relative">
            <div class="text-center max-w-3xl mx-auto">
               <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">The Reality of Running a Solo Business</h2>
               <p class="mt-4 text-slate-400 text-lg">You're wearing all the hats, and something has to give. Usually, it's missed opportunities.</p>
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mt-16">
               <!-- Card 1 -->
               <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 transform hover:-translate-y-2 transition-transform duration-300">
                  <div class="bg-red-500/10 text-red-400 rounded-lg w-12 h-12 flex items-center justify-center mb-4" role="img" aria-label="Missed Phone Call Icon">
                     <i data-feather="phone-missed"></i>
                  </div>
                  <h3 class="font-bold text-white text-lg mb-2">Missed Call = Lost Money</h3>
                  <p class="text-slate-400">New customers call once, get your voicemail, and book somewhere else immediately.</p>
               </div>
               <!-- Card 2 -->
               <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 transform hover:-translate-y-2 transition-transform duration-300">
                  <div class="bg-blue-500/10 text-blue-400 rounded-lg w-12 h-12 flex items-center justify-center mb-4" role="img" aria-label="Recurring Client Icon">
                     <i data-feather="refresh-cw"></i>
                  </div>
                  <h3 class="font-bold text-white text-lg mb-2">Clients Forget to Rebook</h3>
                  <p class="text-slate-400">Happy clients walk out but forget to schedule their next visit, leaving gaps in your calendar.</p>
               </div>
               <!-- Card 3 -->
               <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 transform hover:-translate-y-2 transition-transform duration-300">
                  <div class="bg-yellow-500/10 text-yellow-400 rounded-lg w-12 h-12 flex items-center justify-center mb-4" role="img" aria-label="Star Rating Icon">
                     <i data-feather="star"></i>
                  </div>
                  <h3 class="font-bold text-white text-lg mb-2">No Reviews = No Growth</h3>
                  <p class="text-slate-400">Without a steady stream of fresh reviews, it's hard to build the trust needed to attract new clients.</p>
               </div>
               <!-- Card 4 -->
               <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 transform hover:-translate-y-2 transition-transform duration-300">
                  <div class="bg-green-500/10 text-green-400 rounded-lg w-12 h-12 flex items-center justify-center mb-4" role="img" aria-label="Dollar Sign Icon">
                     <i data-feather="dollar-sign"></i>
                  </div>
                  <h3 class="font-bold text-white text-lg mb-2">Expensive, Bloated Software</h3>
                  <p class="text-slate-400">Complex salon software costs a fortune with features you'll never use. You just want more bookings.</p>
               </div>
            </div>
         </div>
      </section>

      <!-- Solution Section -->
      <section class="py-20">
         <div class="container mx-auto px-6 relative">
            <div class="text-center max-w-3xl mx-auto">
               <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">Introducing ProBookingQR</h2>
               <p class="mt-4 text-slate-400 text-lg">One QR code. Unlimited bookings. Zero missed opportunities. Here's how it fills your calendar automatically.</p>
            </div>

            <div class="relative mt-16">
               <!-- The line connecting the steps -->
               <div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-slate-700 -translate-y-1/2"></div>

               <div class="grid md:grid-cols-3 gap-12 relative">
                  <!-- Step 1 -->
                  <div class="text-center">
                     <div class="relative mb-6">
                        <div class="bg-indigo-500 text-white w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold mx-auto z-10 relative border-4 border-slate-900">1</div>
                     </div>
                     <h3 class="font-bold text-white text-xl mb-2">Client Scans QR Code</h3>
                     <p class="text-slate-400">Place your unique QR code anywhere‚Äîon business cards, your window, social media. One scan opens your booking page.</p>
                  </div>
                  <!-- Step 2 -->
                  <div class="text-center">
                     <div class="relative mb-6">
                        <div class="bg-indigo-500 text-white w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold mx-auto z-10 relative border-4 border-slate-900">2</div>
                     </div>
                     <h3 class="font-bold text-white text-xl mb-2">Instant Self-Booking</h3>
                     <p class="text-slate-400">They pick a service and an available time that works for them. No calling, no waiting, no friction.</p>
                  </div>
                  <!-- Step 3 -->
                  <div class="text-center">
                     <div class="relative mb-6">
                        <div class="bg-indigo-500 text-white w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold mx-auto z-10 relative border-4 border-slate-900">3</div>
                     </div>
                     <h3 class="font-bold text-white text-xl mb-2">Automated Follow-Up</h3>
                     <p class="text-slate-400">Confirmations, reminders, and review requests are all sent automatically. Your calendar fills while you work.</p>
                  </div>
               </div>
            </div>

            <!-- Testimonial -->
            <div class="mt-24 max-w-3xl mx-auto bg-slate-800/50 p-8 rounded-2xl border border-slate-700 text-center">
               <p class="text-xl italic text-white">"I used to spend hours chasing bookings. Now my phone buzzes with new appointments while I'm working. I've booked <span class="text-indigo-400 font-semibold">40% more clients</span> without lifting a finger."</p>
               <div class="mt-6 font-semibold text-slate-300">- Sarah M., Solo Stylist</div>
               <p class="text-sm text-slate-500 mt-2">Verified via Trustpilot</p>
            </div>
         </div>
      </section>

      <!-- Pricing Section -->
      <section id="pricing" class="pt-20 pb-28">
         <div class="container mx-auto px-6 relative">
            <div class="text-center max-w-3xl mx-auto">
               <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">Simple Pricing That Pays for Itself</h2>
               <p class="mt-4 text-slate-400 text-lg">No setup fees. No contracts. Just one flat rate that brings in more business than it costs.</p>
            </div>

            <div class="flex justify-center mt-12">
               <div class="bg-slate-800 border-2 border-indigo-500 rounded-2xl p-8 max-w-lg w-full shadow-2xl shadow-indigo-500/10">
                  <div class="text-center">
                     <h3 class="text-2xl font-bold text-white mb-2">ProBookingQR System</h3>
                     <div class="flex items-center justify-center text-5xl font-extrabold text-white mb-2">
                        <span class="text-3xl font-medium text-slate-500 line-through mr-3">$99</span>
                        $49
                        <span class="text-lg font-medium text-slate-400 ml-2">/month</span>
                     </div>
                     <p class="text-slate-400">Limited Time Offer. Cancel anytime.</p>
                  </div>

                  <ul class="space-y-4 my-8">
                     <li class="flex items-center">
                        <span role="img" aria-label="Checkmark" class="text-green-400 w-5 h-5 mr-3"><i data-feather="check-circle"></i></span> Custom QR-to-Book page with your branding
                     </li>
                     <li class="flex items-center">
                        <span role="img" aria-label="Checkmark" class="text-green-400 w-5 h-5 mr-3"><i data-feather="check-circle"></i></span> Automatic appointment confirmations & reminders
                     </li>
                     <li class="flex items-center">
                        <span role="img" aria-label="Checkmark" class="text-green-400 w-5 h-5 mr-3"><i data-feather="check-circle"></i></span> Google Calendar integration
                     </li>
                     <li class="flex items-center">
                        <span role="img" aria-label="Checkmark" class="text-green-400 w-5 h-5 mr-3"><i data-feather="check-circle"></i></span> Automated review requests
                     </li>
                     <li class="flex items-center">
                        <span role="img" aria-label="Checkmark" class="text-green-400 w-5 h-5 mr-3"><i data-feather="check-circle"></i></span> Reactivation texts for dormant clients
                     </li>
                     <li class="flex items-center">
                        <span role="img" aria-label="Checkmark" class="text-green-400 w-5 h-5 mr-3"><i data-feather="check-circle"></i></span> Complete setup & training included
                     </li>
                  </ul>

                  <div class="bg-green-500/10 border border-green-400/30 text-green-300 p-4 rounded-lg text-center mb-6">
                     <h4 class="font-bold">üõ°Ô∏è 30-Day Money-Back Guarantee</h4>
                     <p class="text-sm mt-1">If you're not completely satisfied, we'll refund every penny. No questions asked.</p>
                  </div>
               </div>
            </div>

            <div class="mt-12 text-center bg-yellow-500/10 border border-yellow-600/30 text-yellow-200 max-w-2xl mx-auto p-4 rounded-lg">
               <h4 class="font-bold text-yellow-100">‚è∞ Limited Time Offer: Lock In Your $49/Month Rate!</h4>
               <p class="text-sm mt-1">We're only taking on 20 new salons this month to ensure perfect service. Secure your spot now!</p>
            </div>
         </div>
      </section>

      <!-- Client Results Section -->
      <section class="py-20">
         <div class="container mx-auto px-6 text-center relative">
            <h2 class="text-3xl md:text-4xl font-bold text-white text-glow">What Our Clients Are Seeing</h2>
            <div class="mt-12 max-w-4xl mx-auto grid md:grid-cols-3 gap-8 text-left">
               <div class="bg-slate-800 p-6 rounded-lg border border-slate-700">
                  <p class="text-xl text-white font-bold">+11 New Appointments</p>
                  <p class="text-slate-400 mt-2">‚ÄúThe first week I put the QR code on my mirror, 11 new clients booked without me lifting a finger.‚Äù</p>
                  <p class="mt-4 text-sm text-slate-500">‚Äî Mia L., Esthetician</p>
               </div>
               <div class="bg-slate-800 p-6 rounded-lg border border-slate-700">
                  <p class="text-xl text-white font-bold">20% More Rebookings</p>
                  <p class="text-slate-400 mt-2">‚ÄúThe automatic reminders help clients rebook without me asking ‚Äî huge time saver.‚Äù</p>
                  <p class="mt-4 text-sm text-slate-500">‚Äî Jo, Independent Barber</p>
               </div>
               <div class="bg-slate-800 p-6 rounded-lg border border-slate-700">
                  <p class="text-xl text-white font-bold">60-Second Setup</p>
                  <p class="text-slate-400 mt-2">‚ÄúIt was so fast. I gave my info and had my booking page and QR code the next day.‚Äù</p>
                  <p class="mt-4 text-sm text-slate-500">‚Äî Rina, Lash Tech</p>
               </div>
            </div>
         </div>
      </section>

      <!-- CTA Section -->
      <section class="bg-indigo-600">
         <div class="container mx-auto px-6 py-20 text-center relative">
            <h2 class="text-3xl md:text-4xl font-bold text-white">Ready to Stop Missing Bookings?</h2>
            <p class="mt-4 text-indigo-200 text-lg max-w-2xl mx-auto">Join over 200 salons already using ProBookingQR to fill their calendars automatically.</p>
            <a href="javascript:void(0)" onclick="openChatbot()" class="mt-8 inline-block bg-white hover:bg-slate-100 text-indigo-600 font-bold text-lg px-8 py-4 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105">
               Get Started for Just $49
            </a>
            <p class="mt-4 text-indigo-200 text-sm">Setup is hands-free and takes less than 24 hours.</p>
         </div>
      </section>

   </main>

   <!-- Footer -->
   <footer class="bg-slate-900 border-t border-slate-800">
      <div class="container mx-auto px-6 py-8 text-center text-slate-500">
         <p>¬© 2025 ProBookingQR. All rights reserved.</p>
      </div>
   </footer>

   <!-- Chatbot Modal -->
   <div id="chatbot-modal" class="fixed inset-0 z-50">
      <div class="absolute inset-0 bg-black bg-opacity-70 backdrop-blur-sm"></div>
      <div class="relative w-full h-full">
         <button onclick="closeChatbot()" class="absolute top-4 right-4 text-white text-3xl font-light hover:text-gray-300 z-50 bg-black bg-opacity-50 rounded-full w-10 h-10 flex items-center justify-center" aria-label="Close chatbot">√ó</button>
         <div id="chatbot-root" class="w-full h-full">
            <!-- React Chatbot will be rendered here -->
         </div>
      </div>
   </div>


   <!-- Deferred Scripts for Performance -->
   <script src="https://unpkg.com/feather-icons"></script>
   <script defer>
      // Initialize Feather Icons after the script has loaded
      document.addEventListener('DOMContentLoaded', () => {
         feather.replace();
      });

      // Chatbot Modal Functions
      function openChatbot() {
         var modal = document.getElementById('chatbot-modal');
         modal.style.display = 'block';
         document.body.style.overflow = 'hidden'; // Prevent scrolling background
      }

      function closeChatbot() {
         var modal = document.getElementById('chatbot-modal');
         modal.style.display = 'none';
         document.body.style.overflow = 'auto';
      }
   </script>

   <!-- React Chatbot Script -->
   <script type="text/babel">
      const { useState, useEffect, useRef } = React;

        // Main App Component
        const App = () => {
          return (
            <div className="bg-orange-50 w-full h-full font-sans flex items-center justify-center">
              <ProBookingChatbot />
            </div>
          );
        };

        // Main Chatbot Component
        const ProBookingChatbot = () => {
          // State management
          const [currentStep, setCurrentStep] = useState(0);
          const [messages, setMessages] = useState([]);
          const [userData, setUserData] = useState({
            firstName: '',
            salonName: '',
            isTeamBusiness: false,
            teamMembers: [],
            fullAddress: '',
            hours: {
                mon: { open: '09:00', close: '17:00', closed: false },
                tue: { open: '09:00', close: '17:00', closed: false },
                wed: { open: '09:00', close: '17:00', closed: false },
                thu: { open: '09:00', close: '17:00', closed: false },
                fri: { open: '09:00', close: '17:00', closed: false },
                sat: { open: '10:00', close: '16:00', closed: true },
                sun: { open: '10:00', close: '16:00', closed: true }
            },
            services: [],
            smartMessages: [],
          });
          const [isTyping, setIsTyping] = useState(false);
          const [isLoading, setIsLoading] = useState(false);
          const messagesEndRef = useRef(null);

          // Available services for selection
          const serviceOptions = [
            'Haircuts & Styling', 'Hair Color', 'Highlights/Balayage', 'Perms & Texturizing', 
            'Deep Conditioning', 'Eyebrow Services', 'Makeup Application', 'Hair Extensions',
            'Scalp Treatments', 'Blowouts'
          ];

          // Smart message options for selection
          const messageOptions = [
            'Booking confirmation', '24-hour reminder', 'Thank you & review',
            'Win-back inactive', 'Rebook promotion'
          ];

          // --- CONVERSATION FLOW ---
          const conversationSteps = [
            {
              id: 'welcome',
              botMessage: "Hi! I'm here to set up your salon's QR booking system. This takes about 3 minutes. First, what's your name?",
              inputType: 'text',
              field: 'firstName',
              placeholder: 'Enter your first name...'
            },
            {
              id: 'salon_name',
              botMessage: (data) => `Nice to meet you, ${data.firstName}! What's your salon called?`,
              inputType: 'text',
              field: 'salonName',
              placeholder: 'Enter your salon name...'
            },
            {
              id: 'team_members',
              botMessage: (data) => `Got it, ${data.salonName}! Are you working solo, or do you have a team? This helps us create individual booking pages and QR codes for each person.`,
              inputType: 'team_setup',
              field: 'teamSetup'
            },
            {
              id: 'address_hours',
              botMessage: "Perfect! Now I need your business address and hours so clients know where and when to find you. üìç",
              inputType: 'address_hours',
              field: 'addressAndHours'
            },
            {
              id: 'services',
              botMessage: "Great, location is set! Now, what services do you want people to book online? Pick up to 5.",
              inputType: 'multiselect',
              options: serviceOptions,
              maxSelections: 5,
              field: 'services'
            },
            {
              id: 'smart_messages',
              botMessage: "Got it. Now, let's automate your follow-ups. Pick any you'd like to use:",
              inputType: 'multiselect',
              options: messageOptions,
              maxSelections: 5,
              field: 'smartMessages'
            },
            {
              id: 'building_system',
              botMessage: "Awesome! Let me build your system. This will just take a moment...",
              inputType: 'progress',
              action: 'buildSystem'
            },
            {
              id: 'final_summary',
              botMessage: (data) => `üéâ Your QR booking system is ready! Here's what you get:
‚Ä¢ Custom booking page: book.probookingqr.com/${data.salonName.toLowerCase().replace(/\s+/g, '-')}
‚Ä¢ Printable QR codes for your salon
‚Ä¢ Automated messages: ${data.smartMessages.join(', ')}
‚Ä¢ Real-time calendar sync & mobile booking

Ready to activate your system for just $49/month (usually $99)? This offer is for the first 20 clients this month. You can cancel anytime.`,
              inputType: 'payment',
              field: 'payment'
            }
          ];
          
          // --- CORE LOGIC ---

          const addMessage = (text, isBot = false, inputType = null) => {
            const newMessage = {
              id: Date.now() + Math.random(),
              text,
              isBot,
              timestamp: new Date(),
              inputType,
            };
            setMessages(prev => [...prev, newMessage]);
            if(isBot) setIsTyping(false);
          };

          const scrollToBottom = () => {
            if (messagesEndRef.current) {
                messagesEndRef.current.scrollIntoView({ behavior: "smooth" });
            }
          };

          useEffect(scrollToBottom, [messages, isTyping]);
          
          const processStep = async (stepIndex, data) => {
            if (stepIndex >= conversationSteps.length) return;

            const step = conversationSteps[stepIndex];
            setCurrentStep(stepIndex);
            
            if (step.id === 'final_summary') {
              await saveOnboardingData(data);
            }

            const botMessageText = typeof step.botMessage === 'function'
              ? step.botMessage(data)
              : step.botMessage;
            
            if (botMessageText) {
               setTimeout(() => {
                 setIsTyping(true);
                 setTimeout(() => {
                   addMessage(botMessageText, true, step.inputType);
                 }, 1000);
               }, 500);
            }
            
            if (step.action) {
              setIsLoading(true);
              await handleAction(step.action, data, stepIndex);
              setIsLoading(false);
            }
          };
          
          const handleAction = async (action, data, stepIndex) => {
            switch (action) {
              case 'buildSystem':
                await showBuildingProgress();
                processStep(stepIndex + 1, data);
                break;
              default:
                break;
            }
          };

          const handleUserResponse = async (responseValue, field) => {
            let responseText = '';
            let updatedData = { ...userData };

            if (field === 'teamSetup') {
                const members = responseValue.teamMembers || [];
                responseText = responseValue.isTeamBusiness ? `Team: ${members.map(m => `${m.name} (${m.role})`).join(', ')}` : "It's Just Me";
                updatedData = { ...userData, ...responseValue };
            }
            else if (field === 'addressAndHours') {
                 responseText = `Address and hours have been set.`;
                 updatedData = { ...userData, ...responseValue };
            }
            else if (Array.isArray(responseValue)) {
                 responseText = responseValue.join(', ');
                 updatedData[field] = responseValue;
            } else {
                 responseText = responseValue;
                 updatedData[field] = responseValue;
            }

            addMessage(responseText, false);
            setUserData(updatedData);
            processStep(currentStep + 1, updatedData);
          };

          const saveOnboardingData = async (data) => {
            console.log("--- ONBOARDING DATA READY TO SEND ---");
            console.log(JSON.stringify(data, null, 2));
            return Promise.resolve();
          };

          const showBuildingProgress = () => {
            return new Promise((resolve) => {
              const steps = [
                "‚úÖ Creating your booking page...",
                "‚úÖ Adding your services...",
                "‚úÖ Setting up smart notifications...",
                "‚úÖ Generating unique QR codes..."
              ];
              
              let delay = 0;
              steps.forEach((step, index) => {
                delay += 1200;
                setTimeout(() => {
                  setMessages(prev => [...prev, { id: Math.random(), text: step, isBot: true }]);
                  if (index === steps.length - 1) {
                    setTimeout(resolve, 1000);
                  }
                }, delay);
              });
            });
          };

          useEffect(() => {
            processStep(0, userData);
          }, []);

          const currentStepData = conversationSteps[currentStep];

          return (
            <div className="chatbot-container w-full h-full flex flex-col bg-white md:rounded-2xl shadow-2xl overflow-hidden border border-gray-200">
              <div className="chat-header p-4 bg-gray-50 border-b border-gray-200">
                <h3 className="text-lg font-bold text-gray-800 text-center">ProBookingQR Setup</h3>
                <div className="progress-bar bg-gray-200 rounded-full h-2 mt-2">
                  <div
                    className="progress-fill bg-orange-500 h-2 rounded-full transition-all duration-500"
                    style={{ width: `${(currentStep / (conversationSteps.length - 1)) * 100}%` }}
                  />
                </div>
              </div>

              <div className="messages-container flex-1 p-4 overflow-y-auto bg-orange-100/50">
                {messages.map(message => (
                  <div key={message.id} className={`message flex my-3 ${message.isBot ? 'justify-start' : 'justify-end'}`}>
                    <div className={`message-bubble max-w-xs md:max-w-md p-3 rounded-2xl ${message.isBot ? 'bg-white text-gray-700 shadow-sm' : 'bg-orange-500 text-white'}`}>
                      <p className="whitespace-pre-wrap">{message.text}</p>
                    </div>
                  </div>
                ))}
                {isTyping && (
                  <div className="message flex my-3 justify-start">
                    <div className="message-bubble flex items-center space-x-1.5 p-3 rounded-2xl bg-white text-gray-700 shadow-sm">
                      <div className="typing-indicator">
                        <span></span><span></span><span></span>
                      </div>
                    </div>
                  </div>
                )}
                <div ref={messagesEndRef} />
              </div>

              <div className="input-container p-4 bg-gray-50 border-t border-gray-200">
                <InputComponent
                  key={currentStep}
                  step={currentStepData}
                  onResponse={handleUserResponse}
                  isLoading={isLoading}
                />
              </div>
            </div>
          );
        };
        
        const AddressHoursComponent = ({ onResponse, field }) => {
            const [addressData, setAddressData] = useState({
                fullAddress: '',
                hours: {
                    mon: { open: '09:00', close: '17:00', closed: false },
                    tue: { open: '09:00', close: '17:00', closed: false },
                    wed: { open: '09:00', close: '17:00', closed: false },
                    thu: { open: '09:00', close: '17:00', closed: false },
                    fri: { open: '09:00', close: '17:00', closed: false },
                    sat: { open: '10:00', close: '16:00', closed: true },
                    sun: { open: '10:00', close: '16:00', closed: true }
                }
            });

            const handleHoursChange = (day, part, value) => {
                setAddressData(prev => ({
                    ...prev,
                    hours: {
                        ...prev.hours,
                        [day]: { ...prev.hours[day], [part]: value }
                    }
                }));
            };
            
            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setAddressData(prev => ({ ...prev, [name]: value }));
            };

            const handleSubmit = () => {
                if(addressData.fullAddress.trim()) {
                    onResponse(addressData, field);
                } else {
                    alert('Please enter a business address.');
                }
            };
            
            const dayNames = { mon: 'Mon', tue: 'Tue', wed: 'Wed', thu: 'Thu', fri: 'Fri', sat: 'Sat', sun: 'Sun' };

            return (
                <div className="space-y-4 text-sm">
                    <div>
                        <label className="font-bold text-gray-700">Full Business Address</label>
                        <textarea name="fullAddress" value={addressData.fullAddress} onChange={handleInputChange} rows="2" placeholder="123 Main Street, Suite 2B, City, State 12345" className="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 text-gray-900">